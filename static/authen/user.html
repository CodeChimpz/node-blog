<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Profile</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="header">
        <nav id="menu">
            <div id="authentication">

            </div>
            <ul id="navigation">
                <li>
                    <a href="about.html">About</a>
                </li>
                <li>
                    <a href="gallery.html">View gallery</a>
                </li>
                <li>
                    <a class="back" href="/index.html">Main page</a>
                </li>
            </ul>
        </nav>
    </div>
    <div id="userpf">
        <div id = "pfp">
            <img name="pfpimg" id="pfpimg" src="/img/no-avatar.png"/>
        </div>
        <form id="uploadpfp" onsubmit="updatePFP()">
            Фото профиля:<input name="pfpimage" type="file" accept="image/png,image/jpeg">
            <button name="sendpfp" type="submit">Загрузить</button>
            <button name="deletepfp" type="submit">Удалить фото профиля</button>
        </form>
        <div>
            <p id = "username"></p>
            <p id="email" ></p>
        </div>
        <div id="useractionmenu">
            <ul>
                <li>
                    <a href="">Settings</a>
                </li>
            </ul>
        </div>
    </div>
    <script>
        const pfpUpload = document.forms.uploadpfp
        const pfpCont = document.getElementById("pfpimg")
        pfpUpload.addEventListener('submit',e=>e.preventDefault())

        function updatePFP(){
            const sendfile = pfpUpload.elements.pfpimage.files[0]
            const data = new FormData
            data.set('file',sendfile)
            fetch("/user/data/userPfp",{
                method:'post',
                headers:{
                    'File-Type':'image',
                    'Image-Name':sendfile.name,
                    'Image-Size':sendfile.size
                },
                body:data
            }).then(res=>
            {
                return res.json()
            })
                .then(res=>{
                console.log(res.message)
            }
            )
                .catch(err=>{console.log(err)})
        }

    </script>
    <script src="/authenticated.js"></script>
</body>
</html>